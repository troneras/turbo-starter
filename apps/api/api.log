$ bun run --watch src/server.ts
{"level":30,"time":1753893596283,"pid":1483617,"hostname":"odin","msg":"Server listening at http://127.0.0.1:3001"}
{"level":30,"time":1753893612379,"pid":1483617,"hostname":"odin","reqId":"req-1","req":{"method":"POST","url":"/api/auth/login","host":"localhost:3001","remoteAddress":"127.0.0.1","remotePort":46246},"msg":"incoming request"}
{"level":50,"time":1753893612427,"pid":1483617,"hostname":"odin","err":{"type":"BadRequestError","message":"Must provide either azure_token or service_token","stack":"BadRequestError: Must provide either azure_token or service_token\n    at badRequest (/home/dev/work/cms-platform/node_modules/@fastify/sensible/lib/httpErrors.js:21:28)\n    at <anonymous> (/home/dev/work/cms-platform/node_modules/@fastify/sensible/index.js:50:32)\n    at <anonymous> (/home/dev/work/cms-platform/apps/api/src/routes/api/auth/index.ts:23:15)\n    at preHandlerCallbackInner (/home/dev/work/cms-platform/node_modules/fastify/lib/handleRequest.js:161:24)\n    at preHandlerCallback (/home/dev/work/cms-platform/node_modules/fastify/lib/handleRequest.js:129:5)\n    at next (/home/dev/work/cms-platform/node_modules/fastify/lib/hooks.js:236:9)\n    at handleResolve (/home/dev/work/cms-platform/node_modules/fastify/lib/hooks.js:253:7)\n    at processTicksAndRejections (native:7:39)","status":400,"statusCode":400,"expose":true},"request":{"method":"POST","url":"/api/auth/login","query":{},"params":{}},"msg":"Unhandled error occurred"}
{"level":30,"time":1753893612429,"pid":1483617,"hostname":"odin","reqId":"req-1","res":{"statusCode":400},"responseTime":49.85241600000154,"msg":"request completed"}
{"level":30,"time":1753893612442,"pid":1483617,"hostname":"odin","reqId":"req-2","req":{"method":"POST","url":"/api/translations/keys","host":"localhost:3001","remoteAddress":"127.0.0.1","remotePort":46256},"msg":"incoming request"}
{"level":50,"time":1753893612443,"pid":1483617,"hostname":"odin","err":{"type":"UnauthorizedError","message":"Unauthorized","stack":"UnauthorizedError: Unauthorized\n    at unauthorized (/home/dev/work/cms-platform/node_modules/@fastify/sensible/lib/httpErrors.js:25:28)\n    at <anonymous> (/home/dev/work/cms-platform/apps/api/src/plugins/external/auth.ts:380:38)\n    at processTicksAndRejections (native:7:39)","status":401,"statusCode":401,"expose":true},"request":{"method":"POST","url":"/api/translations/keys","query":{},"params":{}},"msg":"Unhandled error occurred"}
{"level":30,"time":1753893612444,"pid":1483617,"hostname":"odin","reqId":"req-2","res":{"statusCode":401},"responseTime":2.112887999999657,"msg":"request completed"}
{"level":30,"time":1753893612456,"pid":1483617,"hostname":"odin","reqId":"req-3","req":{"method":"GET","url":"/api/translations/keys","host":"localhost:3001","remoteAddress":"127.0.0.1","remotePort":46270},"msg":"incoming request"}
{"level":50,"time":1753893612457,"pid":1483617,"hostname":"odin","err":{"type":"UnauthorizedError","message":"Unauthorized","stack":"UnauthorizedError: Unauthorized\n    at unauthorized (/home/dev/work/cms-platform/node_modules/@fastify/sensible/lib/httpErrors.js:25:28)\n    at <anonymous> (/home/dev/work/cms-platform/apps/api/src/plugins/external/auth.ts:380:38)\n    at processTicksAndRejections (native:7:39)","status":401,"statusCode":401,"expose":true},"request":{"method":"GET","url":"/api/translations/keys","query":{},"params":{}},"msg":"Unhandled error occurred"}
{"level":30,"time":1753893612457,"pid":1483617,"hostname":"odin","reqId":"req-3","res":{"statusCode":401},"responseTime":0.9232779999983904,"msg":"request completed"}
{"level":30,"time":1753893612470,"pid":1483617,"hostname":"odin","reqId":"req-4","req":{"method":"POST","url":"/api/translations/variants","host":"localhost:3001","remoteAddress":"127.0.0.1","remotePort":46274},"msg":"incoming request"}
{"level":50,"time":1753893612471,"pid":1483617,"hostname":"odin","err":{"type":"UnauthorizedError","message":"Unauthorized","stack":"UnauthorizedError: Unauthorized\n    at unauthorized (/home/dev/work/cms-platform/node_modules/@fastify/sensible/lib/httpErrors.js:25:28)\n    at <anonymous> (/home/dev/work/cms-platform/apps/api/src/plugins/external/auth.ts:380:38)\n    at processTicksAndRejections (native:7:39)","status":401,"statusCode":401,"expose":true},"request":{"method":"POST","url":"/api/translations/variants","query":{},"params":{}},"msg":"Unhandled error occurred"}
{"level":30,"time":1753893612471,"pid":1483617,"hostname":"odin","reqId":"req-4","res":{"statusCode":401},"responseTime":1.0445269999981974,"msg":"request completed"}
{"level":30,"time":1753893612487,"pid":1483617,"hostname":"odin","reqId":"req-5","req":{"method":"GET","url":"/api/translations/variants?fullKey=checkout.button.confirm","host":"localhost:3001","remoteAddress":"127.0.0.1","remotePort":46282},"msg":"incoming request"}
{"level":50,"time":1753893612488,"pid":1483617,"hostname":"odin","err":{"type":"UnauthorizedError","message":"Unauthorized","stack":"UnauthorizedError: Unauthorized\n    at unauthorized (/home/dev/work/cms-platform/node_modules/@fastify/sensible/lib/httpErrors.js:25:28)\n    at <anonymous> (/home/dev/work/cms-platform/apps/api/src/plugins/external/auth.ts:380:38)\n    at processTicksAndRejections (native:7:39)","status":401,"statusCode":401,"expose":true},"request":{"method":"GET","url":"/api/translations/variants?fullKey=checkout.button.confirm","query":{"fullKey":"checkout.button.confirm"},"params":{}},"msg":"Unhandled error occurred"}
{"level":30,"time":1753893612488,"pid":1483617,"hostname":"odin","reqId":"req-5","res":{"statusCode":401},"responseTime":0.7929470000017318,"msg":"request completed"}
{"level":30,"time":1753893634732,"pid":1483617,"hostname":"odin","reqId":"req-6","req":{"method":"POST","url":"/api/translations/keys","host":"localhost:3001","remoteAddress":"127.0.0.1","remotePort":47370},"msg":"incoming request"}
{"level":40,"time":1753893634732,"pid":1483617,"hostname":"odin","token":"mock-admin-jwt-token","user":"admin@example.com","roles":["admin","user"],"permissionsCount":22,"msg":"Test mode authentication used"}
{"level":50,"time":1753893634748,"pid":1483617,"hostname":"odin","err":{"type":"DrizzleQueryError","message":"Failed query: \n        WITH new_entity AS (\n          INSERT INTO entities (entity_type)\n          VALUES ('translation_key')\n          RETURNING id\n        ),\n        new_version AS (\n          INSERT INTO entity_versions (\n            entity_id, release_id, entity_type, entity_name, entity_key,\n            payload, change_type, created_by\n          )\n          SELECT \n            e.id,\n            get_active_release(),\n            'translation_key',\n            $1,\n            $2,\n            jsonb_build_object(\n              'full_key', $3,\n              'description', $4\n            ),\n            'CREATE',\n            \n          FROM new_entity e\n          RETURNING *\n        )\n        SELECT \n          entity_id as id,\n          payload->>'full_key' as full_key,\n          payload->>'description' as description\n        FROM new_version\n      \nparams: checkout.button.confirm,checkout.button.confirm,checkout.button.confirm,Confirmation button in checkout flow: syntax error at or near \"FROM\"","stack":"Error: Failed query: \n        WITH new_entity AS (\n          INSERT INTO entities (entity_type)\n          VALUES ('translation_key')\n          RETURNING id\n        ),\n        new_version AS (\n          INSERT INTO entity_versions (\n            entity_id, release_id, entity_type, entity_name, entity_key,\n            payload, change_type, created_by\n          )\n          SELECT \n            e.id,\n            get_active_release(),\n            'translation_key',\n            $1,\n            $2,\n            jsonb_build_object(\n              'full_key', $3,\n              'description', $4\n            ),\n            'CREATE',\n            \n          FROM new_entity e\n          RETURNING *\n        )\n        SELECT \n          entity_id as id,\n          payload->>'full_key' as full_key,\n          payload->>'description' as description\n        FROM new_version\n      \nparams: checkout.button.confirm,checkout.button.confirm,checkout.button.confirm,Confirmation button in checkout flow\n    at queryWithCache (/home/dev/work/cms-platform/node_modules/drizzle-orm/pg-core/session.js:42:19)\n    at processTicksAndRejections (native:7:39)\ncaused by: PostgresError: syntax error at or near \"FROM\"\n    at ErrorResponse (/home/dev/work/cms-platform/node_modules/postgres/src/connection.js:794:26)\n    at handle (/home/dev/work/cms-platform/node_modules/postgres/src/connection.js:479:7)\n    at data (/home/dev/work/cms-platform/node_modules/postgres/src/connection.js:315:9)\n    at emit (node:events:95:22)\n    at addChunk (internal:streams/readable:265:47)\n    at readableAddChunkPushByteMode (internal:streams/readable:243:18)\n    at data (node:net:294:52)","query":"\n        WITH new_entity AS (\n          INSERT INTO entities (entity_type)\n          VALUES ('translation_key')\n          RETURNING id\n        ),\n        new_version AS (\n          INSERT INTO entity_versions (\n            entity_id, release_id, entity_type, entity_name, entity_key,\n            payload, change_type, created_by\n          )\n          SELECT \n            e.id,\n            get_active_release(),\n            'translation_key',\n            $1,\n            $2,\n            jsonb_build_object(\n              'full_key', $3,\n              'description', $4\n            ),\n            'CREATE',\n            \n          FROM new_entity e\n          RETURNING *\n        )\n        SELECT \n          entity_id as id,\n          payload->>'full_key' as full_key,\n          payload->>'description' as description\n        FROM new_version\n      ","params":["checkout.button.confirm","checkout.button.confirm","checkout.button.confirm","Confirmation button in checkout flow"]},"request":{"method":"POST","url":"/api/translations/keys","query":{},"params":{}},"msg":"Unhandled error occurred"}
{"level":30,"time":1753893634749,"pid":1483617,"hostname":"odin","reqId":"req-6","res":{"statusCode":500},"responseTime":16.919607000003452,"msg":"request completed"}
{"level":30,"time":1753893634761,"pid":1483617,"hostname":"odin","reqId":"req-7","req":{"method":"GET","url":"/api/translations/keys","host":"localhost:3001","remoteAddress":"127.0.0.1","remotePort":47376},"msg":"incoming request"}
{"level":40,"time":1753893634762,"pid":1483617,"hostname":"odin","token":"mock-admin-jwt-token","user":"admin@example.com","roles":["admin","user"],"permissionsCount":22,"msg":"Test mode authentication used"}
{"level":30,"time":1753893634781,"pid":1483617,"hostname":"odin","reqId":"req-7","res":{"statusCode":200},"responseTime":19.35730599999806,"msg":"request completed"}
{"level":30,"time":1753893634793,"pid":1483617,"hostname":"odin","reqId":"req-8","req":{"method":"POST","url":"/api/translations/variants","host":"localhost:3001","remoteAddress":"127.0.0.1","remotePort":47380},"msg":"incoming request"}
{"level":40,"time":1753893634793,"pid":1483617,"hostname":"odin","token":"mock-admin-jwt-token","user":"admin@example.com","roles":["admin","user"],"permissionsCount":22,"msg":"Test mode authentication used"}
{"level":50,"time":1753893634810,"pid":1483617,"hostname":"odin","err":{"type":"BadRequestError","message":"Translation key does not exist","stack":"BadRequestError: Translation key does not exist\n    at badRequest (/home/dev/work/cms-platform/node_modules/@fastify/sensible/lib/httpErrors.js:21:28)\n    at <anonymous> (/home/dev/work/cms-platform/node_modules/@fastify/sensible/index.js:50:32)\n    at processTicksAndRejections (native:7:39)","status":400,"statusCode":400,"expose":true},"request":{"method":"POST","url":"/api/translations/variants","query":{},"params":{}},"msg":"Unhandled error occurred"}
{"level":30,"time":1753893634811,"pid":1483617,"hostname":"odin","reqId":"req-8","res":{"statusCode":400},"responseTime":17.74169499999698,"msg":"request completed"}
{"level":30,"time":1753893634824,"pid":1483617,"hostname":"odin","reqId":"req-9","req":{"method":"GET","url":"/api/translations/variants?fullKey=checkout.button.confirm","host":"localhost:3001","remoteAddress":"127.0.0.1","remotePort":47390},"msg":"incoming request"}
{"level":40,"time":1753893634824,"pid":1483617,"hostname":"odin","token":"mock-admin-jwt-token","user":"admin@example.com","roles":["admin","user"],"permissionsCount":22,"msg":"Test mode authentication used"}
{"level":30,"time":1753893634840,"pid":1483617,"hostname":"odin","reqId":"req-9","res":{"statusCode":200},"responseTime":15.949695000002976,"msg":"request completed"}
{"level":30,"time":1753893634852,"pid":1483617,"hostname":"odin","reqId":"req-a","req":{"method":"GET","url":"/api/translations/stats","host":"localhost:3001","remoteAddress":"127.0.0.1","remotePort":47402},"msg":"incoming request"}
{"level":40,"time":1753893634853,"pid":1483617,"hostname":"odin","token":"mock-admin-jwt-token","user":"admin@example.com","roles":["admin","user"],"permissionsCount":22,"msg":"Test mode authentication used"}
{"level":50,"time":1753893634867,"pid":1483617,"hostname":"odin","err":{"type":"Error","message":"\"localeCoverage\" is required!","stack":"Error: \"localeCoverage\" is required!\n    at anonymous0 (file:///home/dev/work/cms-platform/node_modules/fast-json-stringify/index.js:151:24)\n    at preSerializationHookEnd (/home/dev/work/cms-platform/node_modules/fastify/lib/reply.js:515:17)\n    at preSerializationHook (/home/dev/work/cms-platform/node_modules/fastify/lib/reply.js:499:5)\n    at <anonymous> (/home/dev/work/cms-platform/node_modules/fastify/lib/reply.js:206:7)\n    at <anonymous> (/home/dev/work/cms-platform/node_modules/fastify/lib/wrapThenable.js:41:17)\n    at processTicksAndRejections (native:7:39)","serialization":{"url":"/api/translations/stats","method":"GET"}},"request":{"method":"GET","url":"/api/translations/stats","query":{},"params":{}},"msg":"Unhandled error occurred"}
{"level":30,"time":1753893634868,"pid":1483617,"hostname":"odin","reqId":"req-a","res":{"statusCode":500},"responseTime":15.241270000005898,"msg":"request completed"}
{"level":30,"time":1753893666510,"pid":1483617,"hostname":"odin","msg":"Server listening at http://127.0.0.1:3001"}
{"level":30,"time":1753893671544,"pid":1483617,"hostname":"odin","reqId":"req-1","req":{"method":"POST","url":"/api/translations/keys","host":"localhost:3001","remoteAddress":"127.0.0.1","remotePort":54308},"msg":"incoming request"}
{"level":40,"time":1753893671547,"pid":1483617,"hostname":"odin","token":"mock-admin-jwt-token","user":"admin@example.com","roles":["admin","user"],"permissionsCount":22,"msg":"Test mode authentication used"}
{"level":50,"time":1753893671610,"pid":1483617,"hostname":"odin","err":{"type":"DrizzleQueryError","message":"Failed query: \n        WITH new_entity AS (\n          INSERT INTO entities (entity_type)\n          VALUES ('translation_key')\n          RETURNING id\n        ),\n        new_version AS (\n          INSERT INTO entity_versions (\n            entity_id, release_id, entity_type, entity_name, entity_key,\n            payload, change_type, created_by\n          )\n          SELECT \n            e.id,\n            get_active_release(),\n            'translation_key',\n            $1,\n            $2,\n            jsonb_build_object(\n              'full_key', $3,\n              'description', $4\n            ),\n            'CREATE',\n            \n          FROM new_entity e\n          RETURNING *\n        )\n        SELECT \n          entity_id as id,\n          payload->>'full_key' as full_key,\n          payload->>'description' as description\n        FROM new_version\n      \nparams: checkout.button.confirm,checkout.button.confirm,checkout.button.confirm,Confirmation button in checkout flow: syntax error at or near \"FROM\"","stack":"Error: Failed query: \n        WITH new_entity AS (\n          INSERT INTO entities (entity_type)\n          VALUES ('translation_key')\n          RETURNING id\n        ),\n        new_version AS (\n          INSERT INTO entity_versions (\n            entity_id, release_id, entity_type, entity_name, entity_key,\n            payload, change_type, created_by\n          )\n          SELECT \n            e.id,\n            get_active_release(),\n            'translation_key',\n            $1,\n            $2,\n            jsonb_build_object(\n              'full_key', $3,\n              'description', $4\n            ),\n            'CREATE',\n            \n          FROM new_entity e\n          RETURNING *\n        )\n        SELECT \n          entity_id as id,\n          payload->>'full_key' as full_key,\n          payload->>'description' as description\n        FROM new_version\n      \nparams: checkout.button.confirm,checkout.button.confirm,checkout.button.confirm,Confirmation button in checkout flow\n    at queryWithCache (/home/dev/work/cms-platform/node_modules/drizzle-orm/pg-core/session.js:42:19)\n    at processTicksAndRejections (native:7:39)\ncaused by: PostgresError: syntax error at or near \"FROM\"\n    at ErrorResponse (/home/dev/work/cms-platform/node_modules/postgres/src/connection.js:794:26)\n    at handle (/home/dev/work/cms-platform/node_modules/postgres/src/connection.js:479:7)\n    at data (/home/dev/work/cms-platform/node_modules/postgres/src/connection.js:315:9)\n    at emit (node:events:95:22)\n    at addChunk (internal:streams/readable:265:47)\n    at readableAddChunkPushByteMode (internal:streams/readable:243:18)\n    at data (node:net:294:52)","query":"\n        WITH new_entity AS (\n          INSERT INTO entities (entity_type)\n          VALUES ('translation_key')\n          RETURNING id\n        ),\n        new_version AS (\n          INSERT INTO entity_versions (\n            entity_id, release_id, entity_type, entity_name, entity_key,\n            payload, change_type, created_by\n          )\n          SELECT \n            e.id,\n            get_active_release(),\n            'translation_key',\n            $1,\n            $2,\n            jsonb_build_object(\n              'full_key', $3,\n              'description', $4\n            ),\n            'CREATE',\n            \n          FROM new_entity e\n          RETURNING *\n        )\n        SELECT \n          entity_id as id,\n          payload->>'full_key' as full_key,\n          payload->>'description' as description\n        FROM new_version\n      ","params":["checkout.button.confirm","checkout.button.confirm","checkout.button.confirm","Confirmation button in checkout flow"]},"request":{"method":"POST","url":"/api/translations/keys","query":{},"params":{}},"msg":"Unhandled error occurred"}
{"level":30,"time":1753893671611,"pid":1483617,"hostname":"odin","reqId":"req-1","res":{"statusCode":500},"responseTime":67.45847799999956,"msg":"request completed"}
{"level":30,"time":1753893671795,"pid":1483617,"hostname":"odin","reqId":"req-2","req":{"method":"GET","url":"/api/translations/keys","host":"localhost:3001","remoteAddress":"127.0.0.1","remotePort":54314},"msg":"incoming request"}
{"level":40,"time":1753893671796,"pid":1483617,"hostname":"odin","token":"mock-admin-jwt-token","user":"admin@example.com","roles":["admin","user"],"permissionsCount":22,"msg":"Test mode authentication used"}
{"level":30,"time":1753893671813,"pid":1483617,"hostname":"odin","reqId":"req-2","res":{"statusCode":200},"responseTime":17.5711739999997,"msg":"request completed"}
{"level":30,"time":1753893671827,"pid":1483617,"hostname":"odin","reqId":"req-3","req":{"method":"POST","url":"/api/translations/variants","host":"localhost:3001","remoteAddress":"127.0.0.1","remotePort":54318},"msg":"incoming request"}
{"level":40,"time":1753893671827,"pid":1483617,"hostname":"odin","token":"mock-admin-jwt-token","user":"admin@example.com","roles":["admin","user"],"permissionsCount":22,"msg":"Test mode authentication used"}
{"level":50,"time":1753893671844,"pid":1483617,"hostname":"odin","err":{"type":"BadRequestError","message":"Translation key does not exist","stack":"BadRequestError: Translation key does not exist\n    at badRequest (/home/dev/work/cms-platform/node_modules/@fastify/sensible/lib/httpErrors.js:21:28)\n    at <anonymous> (/home/dev/work/cms-platform/node_modules/@fastify/sensible/index.js:50:32)\n    at processTicksAndRejections (native:7:39)","status":400,"statusCode":400,"expose":true},"request":{"method":"POST","url":"/api/translations/variants","query":{},"params":{}},"msg":"Unhandled error occurred"}
{"level":30,"time":1753893671845,"pid":1483617,"hostname":"odin","reqId":"req-3","res":{"statusCode":400},"responseTime":17.732358999999633,"msg":"request completed"}
{"level":30,"time":1753893671858,"pid":1483617,"hostname":"odin","reqId":"req-4","req":{"method":"GET","url":"/api/translations/variants?fullKey=checkout.button.confirm","host":"localhost:3001","remoteAddress":"127.0.0.1","remotePort":54330},"msg":"incoming request"}
{"level":40,"time":1753893671858,"pid":1483617,"hostname":"odin","token":"mock-admin-jwt-token","user":"admin@example.com","roles":["admin","user"],"permissionsCount":22,"msg":"Test mode authentication used"}
{"level":30,"time":1753893671875,"pid":1483617,"hostname":"odin","reqId":"req-4","res":{"statusCode":200},"responseTime":17.207918000000063,"msg":"request completed"}
{"level":30,"time":1753893671888,"pid":1483617,"hostname":"odin","reqId":"req-5","req":{"method":"GET","url":"/api/translations/stats","host":"localhost:3001","remoteAddress":"127.0.0.1","remotePort":54340},"msg":"incoming request"}
{"level":40,"time":1753893671888,"pid":1483617,"hostname":"odin","token":"mock-admin-jwt-token","user":"admin@example.com","roles":["admin","user"],"permissionsCount":22,"msg":"Test mode authentication used"}
{"level":30,"time":1753893671904,"pid":1483617,"hostname":"odin","reqId":"req-5","res":{"statusCode":200},"responseTime":15.59410200000002,"msg":"request completed"}
{"level":30,"time":1753893690124,"pid":1483617,"hostname":"odin","msg":"Server listening at http://127.0.0.1:3001"}
{"level":30,"time":1753893696674,"pid":1483617,"hostname":"odin","msg":"Server listening at http://127.0.0.1:3001"}
{"level":30,"time":1753893704265,"pid":1483617,"hostname":"odin","msg":"Server listening at http://127.0.0.1:3001"}
{"level":30,"time":1753893711945,"pid":1483617,"hostname":"odin","msg":"Server listening at http://127.0.0.1:3001"}
{"level":30,"time":1753893717641,"pid":1483617,"hostname":"odin","reqId":"req-1","req":{"method":"POST","url":"/api/translations/keys","host":"localhost:3001","remoteAddress":"127.0.0.1","remotePort":47126},"msg":"incoming request"}
{"level":40,"time":1753893717644,"pid":1483617,"hostname":"odin","token":"mock-admin-jwt-token","user":"admin@example.com","roles":["admin","user"],"permissionsCount":22,"msg":"Test mode authentication used"}
{"level":50,"time":1753893717710,"pid":1483617,"hostname":"odin","err":{"type":"DrizzleQueryError","message":"Failed query: \n        WITH new_entity AS (\n          INSERT INTO entities (entity_type)\n          VALUES ('translation_key')\n          RETURNING id\n        ),\n        new_version AS (\n          INSERT INTO entity_versions (\n            entity_id, release_id, entity_type, entity_name, entity_key,\n            payload, change_type, created_by\n          )\n          SELECT \n            e.id,\n            get_active_release(),\n            'translation_key',\n            $1,\n            $2,\n            jsonb_build_object(\n              'full_key', $3,\n              'description', $4\n            ),\n            'CREATE',\n            $5\n          FROM new_entity e\n          RETURNING *\n        )\n        SELECT \n          entity_id as id,\n          payload->>'full_key' as full_key,\n          payload->>'description' as description\n        FROM new_version\n      \nparams: checkout.button.confirm,checkout.button.confirm,checkout.button.confirm,Confirmation button in checkout flow,NaN: could not determine data type of parameter $3","stack":"Error: Failed query: \n        WITH new_entity AS (\n          INSERT INTO entities (entity_type)\n          VALUES ('translation_key')\n          RETURNING id\n        ),\n        new_version AS (\n          INSERT INTO entity_versions (\n            entity_id, release_id, entity_type, entity_name, entity_key,\n            payload, change_type, created_by\n          )\n          SELECT \n            e.id,\n            get_active_release(),\n            'translation_key',\n            $1,\n            $2,\n            jsonb_build_object(\n              'full_key', $3,\n              'description', $4\n            ),\n            'CREATE',\n            $5\n          FROM new_entity e\n          RETURNING *\n        )\n        SELECT \n          entity_id as id,\n          payload->>'full_key' as full_key,\n          payload->>'description' as description\n        FROM new_version\n      \nparams: checkout.button.confirm,checkout.button.confirm,checkout.button.confirm,Confirmation button in checkout flow,NaN\n    at queryWithCache (/home/dev/work/cms-platform/node_modules/drizzle-orm/pg-core/session.js:42:19)\n    at processTicksAndRejections (native:7:39)\ncaused by: PostgresError: could not determine data type of parameter $3\n    at ErrorResponse (/home/dev/work/cms-platform/node_modules/postgres/src/connection.js:794:26)\n    at handle (/home/dev/work/cms-platform/node_modules/postgres/src/connection.js:479:7)\n    at data (/home/dev/work/cms-platform/node_modules/postgres/src/connection.js:315:9)\n    at emit (node:events:95:22)\n    at addChunk (internal:streams/readable:265:47)\n    at readableAddChunkPushByteMode (internal:streams/readable:243:18)\n    at data (node:net:294:52)","query":"\n        WITH new_entity AS (\n          INSERT INTO entities (entity_type)\n          VALUES ('translation_key')\n          RETURNING id\n        ),\n        new_version AS (\n          INSERT INTO entity_versions (\n            entity_id, release_id, entity_type, entity_name, entity_key,\n            payload, change_type, created_by\n          )\n          SELECT \n            e.id,\n            get_active_release(),\n            'translation_key',\n            $1,\n            $2,\n            jsonb_build_object(\n              'full_key', $3,\n              'description', $4\n            ),\n            'CREATE',\n            $5\n          FROM new_entity e\n          RETURNING *\n        )\n        SELECT \n          entity_id as id,\n          payload->>'full_key' as full_key,\n          payload->>'description' as description\n        FROM new_version\n      ","params":["checkout.button.confirm","checkout.button.confirm","checkout.button.confirm","Confirmation button in checkout flow",null]},"request":{"method":"POST","url":"/api/translations/keys","query":{},"params":{}},"msg":"Unhandled error occurred"}
{"level":30,"time":1753893717712,"pid":1483617,"hostname":"odin","reqId":"req-1","res":{"statusCode":500},"responseTime":70.64472899999964,"msg":"request completed"}
{"level":30,"time":1753893717885,"pid":1483617,"hostname":"odin","reqId":"req-2","req":{"method":"GET","url":"/api/translations/keys","host":"localhost:3001","remoteAddress":"127.0.0.1","remotePort":47132},"msg":"incoming request"}
{"level":40,"time":1753893717886,"pid":1483617,"hostname":"odin","token":"mock-admin-jwt-token","user":"admin@example.com","roles":["admin","user"],"permissionsCount":22,"msg":"Test mode authentication used"}
{"level":30,"time":1753893717899,"pid":1483617,"hostname":"odin","reqId":"req-2","res":{"statusCode":200},"responseTime":13.828250999999,"msg":"request completed"}
{"level":30,"time":1753893717914,"pid":1483617,"hostname":"odin","reqId":"req-3","req":{"method":"POST","url":"/api/translations/variants","host":"localhost:3001","remoteAddress":"127.0.0.1","remotePort":47144},"msg":"incoming request"}
{"level":40,"time":1753893717915,"pid":1483617,"hostname":"odin","token":"mock-admin-jwt-token","user":"admin@example.com","roles":["admin","user"],"permissionsCount":22,"msg":"Test mode authentication used"}
{"level":50,"time":1753893717932,"pid":1483617,"hostname":"odin","err":{"type":"BadRequestError","message":"Translation key does not exist","stack":"BadRequestError: Translation key does not exist\n    at badRequest (/home/dev/work/cms-platform/node_modules/@fastify/sensible/lib/httpErrors.js:21:28)\n    at <anonymous> (/home/dev/work/cms-platform/node_modules/@fastify/sensible/index.js:50:32)\n    at processTicksAndRejections (native:7:39)","status":400,"statusCode":400,"expose":true},"request":{"method":"POST","url":"/api/translations/variants","query":{},"params":{}},"msg":"Unhandled error occurred"}
{"level":30,"time":1753893717932,"pid":1483617,"hostname":"odin","reqId":"req-3","res":{"statusCode":400},"responseTime":17.950130000000172,"msg":"request completed"}
{"level":30,"time":1753893717945,"pid":1483617,"hostname":"odin","reqId":"req-4","req":{"method":"GET","url":"/api/translations/variants?fullKey=checkout.button.confirm","host":"localhost:3001","remoteAddress":"127.0.0.1","remotePort":47158},"msg":"incoming request"}
{"level":40,"time":1753893717945,"pid":1483617,"hostname":"odin","token":"mock-admin-jwt-token","user":"admin@example.com","roles":["admin","user"],"permissionsCount":22,"msg":"Test mode authentication used"}
{"level":30,"time":1753893717965,"pid":1483617,"hostname":"odin","reqId":"req-4","res":{"statusCode":200},"responseTime":20.411913999999342,"msg":"request completed"}
{"level":30,"time":1753893717979,"pid":1483617,"hostname":"odin","reqId":"req-5","req":{"method":"GET","url":"/api/translations/stats","host":"localhost:3001","remoteAddress":"127.0.0.1","remotePort":47168},"msg":"incoming request"}
{"level":40,"time":1753893717979,"pid":1483617,"hostname":"odin","token":"mock-admin-jwt-token","user":"admin@example.com","roles":["admin","user"],"permissionsCount":22,"msg":"Test mode authentication used"}
{"level":30,"time":1753893717998,"pid":1483617,"hostname":"odin","reqId":"req-5","res":{"statusCode":200},"responseTime":18.970170000000508,"msg":"request completed"}
{"level":30,"time":1753893765749,"pid":1483617,"hostname":"odin","msg":"Server listening at http://127.0.0.1:3001"}
{"level":30,"time":1753893787582,"pid":1483617,"hostname":"odin","msg":"Server listening at http://127.0.0.1:3001"}
{"level":30,"time":1753893793421,"pid":1483617,"hostname":"odin","reqId":"req-1","req":{"method":"POST","url":"/api/translations/keys","host":"localhost:3001","remoteAddress":"127.0.0.1","remotePort":51948},"msg":"incoming request"}
{"level":40,"time":1753893793424,"pid":1483617,"hostname":"odin","token":"mock-admin-jwt-token","user":"admin@example.com","roles":["admin","user"],"permissionsCount":22,"msg":"Test mode authentication used"}
{"level":50,"time":1753893793475,"pid":1483617,"hostname":"odin","err":{"type":"DrizzleQueryError","message":"Failed query: \n        WITH new_entity AS (\n          INSERT INTO entities (entity_type)\n          VALUES ('translation_key')\n          RETURNING id\n        ),\n        new_version AS (\n          INSERT INTO entity_versions (\n            entity_id, release_id, entity_type, entity_name, entity_key,\n            payload, change_type, created_by\n          )\n          SELECT \n            e.id,\n            get_active_release(),\n            'translation_key',\n            $1,\n            $2,\n            jsonb_build_object(\n              'full_key', $3,\n              'description', $4\n            ),\n            'CREATE',\n            $5\n          FROM new_entity e\n          RETURNING *\n        )\n        SELECT \n          entity_id as id,\n          payload->>'full_key' as full_key,\n          payload->>'description' as description\n        FROM new_version\n      \nparams: checkout.button.confirm,checkout.button.confirm,checkout.button.confirm,Confirmation button in checkout flow,NaN: could not determine data type of parameter $3","stack":"Error: Failed query: \n        WITH new_entity AS (\n          INSERT INTO entities (entity_type)\n          VALUES ('translation_key')\n          RETURNING id\n        ),\n        new_version AS (\n          INSERT INTO entity_versions (\n            entity_id, release_id, entity_type, entity_name, entity_key,\n            payload, change_type, created_by\n          )\n          SELECT \n            e.id,\n            get_active_release(),\n            'translation_key',\n            $1,\n            $2,\n            jsonb_build_object(\n              'full_key', $3,\n              'description', $4\n            ),\n            'CREATE',\n            $5\n          FROM new_entity e\n          RETURNING *\n        )\n        SELECT \n          entity_id as id,\n          payload->>'full_key' as full_key,\n          payload->>'description' as description\n        FROM new_version\n      \nparams: checkout.button.confirm,checkout.button.confirm,checkout.button.confirm,Confirmation button in checkout flow,NaN\n    at queryWithCache (/home/dev/work/cms-platform/node_modules/drizzle-orm/pg-core/session.js:42:19)\n    at processTicksAndRejections (native:7:39)\ncaused by: PostgresError: could not determine data type of parameter $3\n    at ErrorResponse (/home/dev/work/cms-platform/node_modules/postgres/src/connection.js:794:26)\n    at handle (/home/dev/work/cms-platform/node_modules/postgres/src/connection.js:479:7)\n    at data (/home/dev/work/cms-platform/node_modules/postgres/src/connection.js:315:9)\n    at emit (node:events:95:22)\n    at addChunk (internal:streams/readable:265:47)\n    at readableAddChunkPushByteMode (internal:streams/readable:243:18)\n    at data (node:net:294:52)","query":"\n        WITH new_entity AS (\n          INSERT INTO entities (entity_type)\n          VALUES ('translation_key')\n          RETURNING id\n        ),\n        new_version AS (\n          INSERT INTO entity_versions (\n            entity_id, release_id, entity_type, entity_name, entity_key,\n            payload, change_type, created_by\n          )\n          SELECT \n            e.id,\n            get_active_release(),\n            'translation_key',\n            $1,\n            $2,\n            jsonb_build_object(\n              'full_key', $3,\n              'description', $4\n            ),\n            'CREATE',\n            $5\n          FROM new_entity e\n          RETURNING *\n        )\n        SELECT \n          entity_id as id,\n          payload->>'full_key' as full_key,\n          payload->>'description' as description\n        FROM new_version\n      ","params":["checkout.button.confirm","checkout.button.confirm","checkout.button.confirm","Confirmation button in checkout flow",null]},"request":{"method":"POST","url":"/api/translations/keys","query":{},"params":{}},"msg":"Unhandled error occurred"}
{"level":30,"time":1753893793477,"pid":1483617,"hostname":"odin","reqId":"req-1","res":{"statusCode":500},"responseTime":55.77660099999957,"msg":"request completed"}
{"level":30,"time":1753893793490,"pid":1483617,"hostname":"odin","reqId":"req-2","req":{"method":"GET","url":"/api/translations/keys","host":"localhost:3001","remoteAddress":"127.0.0.1","remotePort":51954},"msg":"incoming request"}
{"level":40,"time":1753893793490,"pid":1483617,"hostname":"odin","token":"mock-admin-jwt-token","user":"admin@example.com","roles":["admin","user"],"permissionsCount":22,"msg":"Test mode authentication used"}
{"level":30,"time":1753893793515,"pid":1483617,"hostname":"odin","reqId":"req-2","res":{"statusCode":200},"responseTime":25.41354600000068,"msg":"request completed"}
{"level":30,"time":1753893793523,"pid":1483617,"hostname":"odin","reqId":"req-3","req":{"method":"POST","url":"/api/translations/variants","host":"localhost:3001","remoteAddress":"127.0.0.1","remotePort":51966},"msg":"incoming request"}
{"level":40,"time":1753893793524,"pid":1483617,"hostname":"odin","token":"mock-admin-jwt-token","user":"admin@example.com","roles":["admin","user"],"permissionsCount":22,"msg":"Test mode authentication used"}
{"level":50,"time":1753893793541,"pid":1483617,"hostname":"odin","err":{"type":"BadRequestError","message":"Translation key does not exist","stack":"BadRequestError: Translation key does not exist\n    at badRequest (/home/dev/work/cms-platform/node_modules/@fastify/sensible/lib/httpErrors.js:21:28)\n    at <anonymous> (/home/dev/work/cms-platform/node_modules/@fastify/sensible/index.js:50:32)\n    at processTicksAndRejections (native:7:39)","status":400,"statusCode":400,"expose":true},"request":{"method":"POST","url":"/api/translations/variants","query":{},"params":{}},"msg":"Unhandled error occurred"}
{"level":30,"time":1753893793541,"pid":1483617,"hostname":"odin","reqId":"req-3","res":{"statusCode":400},"responseTime":17.7112989999996,"msg":"request completed"}
{"level":30,"time":1753893793554,"pid":1483617,"hostname":"odin","reqId":"req-4","req":{"method":"GET","url":"/api/translations/variants?fullKey=checkout.button.confirm","host":"localhost:3001","remoteAddress":"127.0.0.1","remotePort":51980},"msg":"incoming request"}
{"level":40,"time":1753893793555,"pid":1483617,"hostname":"odin","token":"mock-admin-jwt-token","user":"admin@example.com","roles":["admin","user"],"permissionsCount":22,"msg":"Test mode authentication used"}
{"level":30,"time":1753893793571,"pid":1483617,"hostname":"odin","reqId":"req-4","res":{"statusCode":200},"responseTime":16.598567000000003,"msg":"request completed"}
{"level":30,"time":1753893793584,"pid":1483617,"hostname":"odin","reqId":"req-5","req":{"method":"GET","url":"/api/translations/stats","host":"localhost:3001","remoteAddress":"127.0.0.1","remotePort":51982},"msg":"incoming request"}
{"level":40,"time":1753893793584,"pid":1483617,"hostname":"odin","token":"mock-admin-jwt-token","user":"admin@example.com","roles":["admin","user"],"permissionsCount":22,"msg":"Test mode authentication used"}
{"level":30,"time":1753893793601,"pid":1483617,"hostname":"odin","reqId":"req-5","res":{"statusCode":200},"responseTime":17.230145000000448,"msg":"request completed"}
